# 重复请执行查询求导致关联方异常

之前有一段业务代码，有个需求，于是做了修改，在修改中，对后端请求了两次查询接口，一个是进入页面立即执行查询，一个是清除缓存后，又重新执行了一次请求。

虽然有点性能浪费，看着也不那么优雅，但是用量不大，也没有放在心上。

就这样过去了 4 个月，起来也没什么问题，但是今天还是引发了关联方的数据一致性问题。

这个项目，是之前别人开发完的项目，我们接手维护的项目，前后端对代码都不熟悉。

然后之前后端这个查询接口，做了个隐式的更新逻辑，在查询过程中，如果发现当前登录人确实部分数据，会主动给关联方推送，并且没有做防重防。然后接口就因为前端的 2 次调用，给关联方推送了两次数据，导致他们出现问题……

总结：
- 尽量不要做无意义的重复请求
- 前人挖坑后人掉坑，请求接口就不要去做更新的操作了